---
fetch:
  template: command
  label: 'fetch: Check if release {{ lbr }} release {{ rbr }} exists'
  iocage:
    state: fetched
    release: "{{ lbr }} release|d(omit) {{ rbr }}"
    update: "{{ lbr }} update|d(omit) {{ rbr }}"
    components: "{{ lbr }} components|d(omit) {{ rbr }}"
    args: "{{ lbr }} args|d(omit) {{ rbr }}"
  debug:
    - var: result.msg
  assert:
    - '_msg1 in result.msg or _msg2 in result.msg'
  msg_err: "[ERR] Fetch {{ lbr }} release|d('LATEST') {{ rbr }} failed. Missing: {{ lbr }} _msg1 {{ rbr }} or {{ lbr }} _msg2 {{ rbr }}"
  vars:
    _msg1: "\"Release {{ lbr }} release|d('LATEST') {{ rbr }} already fetched\""
    _msg2: "\"Release {{ lbr }} release|d('LATEST') {{ rbr }} was successfully fetched.\""
